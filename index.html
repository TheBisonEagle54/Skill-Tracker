<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Skill BPS System</title>

<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">

<style>
* {
    box-sizing: border-box;
    font-family: 'Quicksand', sans-serif;
}

body {
    margin: 0;
    background: #000;
    color: #fff;
    padding: 50px;
}

.wrapper {
    max-width: 1000px;
    margin: auto;
}

h1 {
    text-align: center;
    margin-bottom: 40px;
    font-size: 32px;
}

/* Dashboard */
.dashboard {
    display: flex;
    gap: 25px;
    margin-bottom: 40px;
}

.stat {
    flex: 1;
    background: #0a0a0a;
    border: 1px solid #111;
    padding: 25px;
    border-radius: 14px;
    text-align: center;
}

.stat h2 {
    margin: 0;
    font-size: 36px;
    color: #0077ff;
}

.stat p {
    margin-top: 8px;
    font-size: 14px;
    color: #888;
}

.icons {
    font-size: 20px;
    margin-top: 6px;
}

/* Inputs */
.add-skill {
    display: flex;
    gap: 15px;
    margin-bottom: 35px;
}

input {
    flex: 1;
    padding: 14px;
    background: #0a0a0a;
    border: 1px solid #111;
    color: white;
    border-radius: 10px;
    font-size: 16px;
    outline: none;
}

input:focus {
    border-color: #0077ff;
}

button {
    padding: 14px 20px;
    background: #0077ff;
    border: none;
    border-radius: 10px;
    color: white;
    font-weight: 600;
    cursor: pointer;
}

button:hover {
    background: #005fd1;
}

/* Skill Card */
.skill-card {
    background: #0a0a0a;
    border: 1px solid #111;
    padding: 25px;
    border-radius: 16px;
    margin-bottom: 25px;
}

.skill-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}

.skill-header h3 {
    margin: 0;
    font-size: 20px;
}

/* Subtle progress beside skill */
.skill-progress {
    font-size: 13px;
    color: #aaa;
    opacity: 0.7;
    margin-left: 6px;
}

/* Progress Bar */
.progress {
    height: 6px;
    background: #111;
    border-radius: 6px;
    margin: 15px 0;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: #0077ff;
}

/* Topics */
.topic {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
    font-size: 16px;
}

.topic.done span {
    text-decoration: line-through;
    color: #666;
}

.topic input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    border: 1.5px solid #0077ff;
    border-radius: 3px;
    background: transparent;
    cursor: pointer;
    transition: 0.15s;
}

.topic input[type="checkbox"]:checked {
    background: #0077ff;
    box-shadow: 0 0 6px #0077ff88;
}

.delete-btn {
    background: none;
    border: none;
    color: #ff4d4d;
    cursor: pointer;
    font-size: 14px;
}

.delete-btn:hover {
    color: #ff1a1a;
}

.add-topic {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}
</style>
</head>

<body>

<div class="wrapper">

<h1>‚ö° Skill BPS System</h1>

<div class="dashboard">
    <div class="stat">
        <h2 id="totalBPS">0</h2>
        <p>Total BPS</p>
    </div>
    <div class="stat">
        <div class="icons" id="badgeIcons"></div>
        <p>Badges</p>
    </div>
    <div class="stat">
        <div class="icons" id="starIcons"></div>
        <p>Stars</p>
    </div>
</div>

<div class="add-skill">
    <input type="text" id="skillInput" placeholder="Add skill..."
           onkeypress="if(event.key==='Enter') addSkill()">
    <button onclick="addSkill()">Add</button>
</div>

<div id="skills"></div>

</div>

<script>
let skills = [];
let totalBPS = 0;

if (localStorage.getItem("skillData")) {
    const saved = JSON.parse(localStorage.getItem("skillData"));
    skills = saved.skills || [];
}

function saveData() {
    localStorage.setItem("skillData", JSON.stringify({ skills }));
}

function recalcBPS() {
    totalBPS = skills.reduce((sum, skill) =>
        sum + skill.topics.filter(t => t.done).length * 100, 0);
}

function addSkill() {
    const name = document.getElementById("skillInput").value.trim();
    if (!name) return;

    skills.push({
        name,
        topics: [],
        collapsed: false,
        completed: false
    });

    document.getElementById("skillInput").value = "";
    saveData();
    render();
}

function addTopic(i) {
    const input = document.getElementById("topicInput"+i);
    const value = input.value.trim();
    if (!value) return;

    skills[i].topics.push({ name: value, done: false });
    input.value = "";
    saveData();
    render();
}

function toggleTopic(i,j,checkbox) {
    skills[i].topics[j].done = checkbox.checked;
    checkBadge(i);
    recalcBPS();
    saveData();
    render();
}

function checkBadge(i) {
    const skill = skills[i];
    skill.completed = skill.topics.length > 0 &&
                      skill.topics.every(t => t.done);
}

function removeTopic(i,j) {
    skills[i].topics.splice(j,1);
    checkBadge(i);
    recalcBPS();
    saveData();
    render();
}

function removeSkill(i) {
    skills.splice(i,1);
    recalcBPS();
    saveData();
    render();
}

function toggleCollapse(i) {
    skills[i].collapsed = !skills[i].collapsed;
    saveData();
    render();
}

function render() {

    recalcBPS();

    const badges = skills.filter(s=>s.completed).length;
    const stars = Math.floor(badges/5);

    document.getElementById("totalBPS").innerText = totalBPS;
    document.getElementById("badgeIcons").innerHTML = "üèÖ ".repeat(badges);
    document.getElementById("starIcons").innerHTML = "‚≠ê ".repeat(stars);

    const container = document.getElementById("skills");
    container.innerHTML = "";

    skills.forEach((skill,i)=>{

        const completed = skill.topics.filter(t=>t.done).length;
        const total = skill.topics.length;
        const percent = total===0 ? 0 : (completed/total)*100;

        const card = document.createElement("div");
        card.className = "skill-card";

        card.innerHTML = `
            <div class="skill-header" onclick="toggleCollapse(${i})">
                <div style="display:flex;gap:10px;align-items:center;">
                    <span>${skill.collapsed ? "‚ñ∏" : "‚ñæ"}</span>
                    <h3>
                        ${skill.name}
                        <span class="skill-progress">
                            (${completed}/${total})
                        </span>
                    </h3>
                </div>
                <div>
                    ${skill.completed ? "üèÖ" : ""}
                    <button class="delete-btn"
                        onclick="event.stopPropagation(); removeSkill(${i})">
                        ‚úï
                    </button>
                </div>
            </div>
        `;

        if (!skill.collapsed) {

            card.innerHTML += `
                <div class="progress">
                    <div class="progress-fill" style="width:${percent}%"></div>
                </div>

                <div class="add-topic">
                    <input type="text" id="topicInput${i}"
                        placeholder="Add topic..."
                        onkeypress="if(event.key==='Enter') addTopic(${i})">
                    <button onclick="addTopic(${i})">Add</button>
                </div>
            `;

            skill.topics.forEach((topic,j)=>{
                const row = document.createElement("div");
                row.className = "topic " + (topic.done ? "done":"");

                row.innerHTML = `
                    <span>${topic.name}</span>
                    <div style="display:flex;gap:10px;align-items:center;">
                        <input type="checkbox"
                            ${topic.done?"checked":""}
                            onchange="toggleTopic(${i},${j},this)">
                        <button class="delete-btn"
                            onclick="removeTopic(${i},${j})">‚úï</button>
                    </div>
                `;
                card.appendChild(row);
            });
        }

        container.appendChild(card);
    });
}

render();
</script>

</body>
</html>
